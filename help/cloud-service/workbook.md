---
title: Ratings extension tutorial
description: Learn how to build a product ratings extension for Adobe Commerce as a Cloud Service using App Builder and AI-assisted development tools.
role: Developer
hide: yes
hidefromtoc: yes
---
# Adobe Developers Live - Adobe Commerce lab workbook

This lab guides you through building a product ratings extension for [!DNL Adobe Commerce as a Cloud Service] using [!DNL Adobe App Builder] and AI-assisted development tools.

## Verify prerequisites

Verify the following prerequisites are installed:

```bash
# Check Node.js version (should be 22.x.x)
node --version

# Check npm version (should be 9.0.0 or higher)
npm --version

# Check Git
git --version

# Check Bash
bash --version
```

## Log in to the Adobe Developer Console

1. Navigate to the [Adobe Developer Console](https://developer.adobe.com/console){target="_blank"}.
1. If you are already logged in, click your profile icon in the top-right and click the **Sign out** button.
1. Log in using the lab email ID and password provided for your seat.
1. If you are prompted to add a secondary email address or phone number, click **Not now**.
1. When you are prompted to select an organization profile, select **Adobe Commerce Labs**.

   ![select-organization](./assets/select-org.png){width="600" zoomable="yes"}

1. If you are prompted to accept the terms and conditions, click the link to read the terms, then click **Accept and continue**.

   ![accept-terms](./assets/accept-terms.png){width="600" zoomable="yes"}

## Run the setup script

If the [prerequisites](#verify-prerequisites) are installed, and you have signed in to the Adobe Developer Console, download and run the setup script. Alternatively, you can manually setup the script by following the [lab prerequisites](workbook-prerequisites.md) steps.

1. Clone the repository that contains the setup script:

   ```bash
   git clone https://github.com/adobe-commerce/commerce-adl-2025.git
   ```

1. Navigate into the repository:

   ```bash
   cd commerce-adl-2025
   ```

1. Run the setup script:

   ```bash
   bash adl-setup.sh
   ```

   While the script is running, you will be prompted to enter your username and password, which will be provided during the lab. Your username will reflect your location and seat number. For example, if you are in San Jose, CA, seat 123, your username will be `sjc-adl-123@adobeeventlab.com`.

   Additionally, you should select the project that corresponds to your seat number and the **stage** workspace. Your project name will reflect your location and seat number. For example, if you are in San Jose, CA, seat 123, your project name will be `SJC ADL 123`.

## Extension development

This section guides you through the process of developing a ratings extension for Adobe Commerce as a Cloud Service using AI-assisted development tools.

### Install extensibility AI tools

Set up the AI-assisted development tools in the `extension` folder:

```bash
cd extension
```

```bash
aio commerce extensibility tools-setup
```

![Install AI tools](./assets/install-ai-tools.png){width="600" zoomable="yes"}

### Open Cursor

>[!NOTE]
>
>When working with AI-assisted development tools, there will be natural variations in the code and responses generated by the agent.

Open the [!DNL Cursor] application and navigate to the `extension` folder or if you have the [Cursor CLI](https://cursor.com/docs/configuration/shell#installing-cli-commands) installed, enter the following command in your terminal:

```bash
cursor .
```

![Open Cursor](./assets/open-cursor.png){width="600" zoomable="yes"}

At this point, all [!DNL Cursor] rules are installed in the `.cursor/rules` folder. You can find MCP tools in the **MCP Settings** in [!DNL Cursor]. Verify that the `commerce-extensibility` toolset is enabled without errors. If you see errors, toggle the toolset off and on.

![Cursor settings](./assets/cursor-settings.png){width="600" zoomable="yes"}

### Code generation

This section demonstrates how to use AI-assisted tools to generate code for a product ratings extension.

#### Define requirements

You will implement an extension that serves product ratings as an API. The [!DNL App Builder] extension responds with ratings details for a given SKU.

**Initial prompt:**

Use the following prompt in [!DNL Cursor]:

1. Open the chat window in Cursor.
1. Select the **Agent** mode.
1. Enter the following prompt:

   ```text
   Implement an Adobe Commerce as a Cloud Service extension to handle Product Ratings.
   Implement a REST API to handle GET ratings requests.
   GET requests will have to support the following query parameters:

   sku -> product SKU
   ```

1. If the agent requests to search the documentation, allow it.

![Enter prompt in Cursor](./assets/enter-prompt.png){width="600" zoomable="yes"}

The agent researches the requirements and asks clarifying questions. Answer the agent's questions precisely to help it generate the best code.

![Agent asks clarifying questions](./assets/agent-questions.png){width="600" zoomable="yes"}

**Response prompt:**

Use the following response to answer the agent's questions:

```text
Yes, this headless extension is for Adobe Commerce as a Cloud Service storefront,
but we do not need any authentication for the GET API because guest users should be able to use it on the storefront.
This extension will be called directly from the storefront,
no async invocation, such as events or webhooks, is required.
Let's start with just the GET API for now,
we will implement other CRUD operations at a later time.
We do not need a DB or storage mechanism right now,
just return random ratings data between 1 and 5 and a ratings count between 1 and 1000.
The API should only return the average rating for the product and the total number of ratings.
We do not need to add tests right now.
```

The agent creates a `requirements.md` file that serves as the source of truth for the implementation.

![Requirements file created](./assets/requirements-file.png){width="600" zoomable="yes"}

#### Verify the requirements and plan architecture

1. Review the `requirements.md` file.
1. If everything looks correct, instruct the agent to move to **Phase 2 - Architecture Planning**.
1. Review the architecture plan.
1. Instruct the agent to proceed with code generation.

![Architecture planning](./assets/architecture-planning.png){width="600" zoomable="yes"}

#### Generate code

The agent generates the necessary code and provides a detailed summary with your next steps.

![Code generation summary](./assets/code-generation-summary.png){width="600" zoomable="yes"}

![Next steps](./assets/next-steps.png){width="600" zoomable="yes"}

### Local testing

Ask the agent to help you test the code locally.

```text
Test the ratings API locally on a dev server using cURL.
```

Follow the agent's instructions and confirm that the API is working locally.

![Local testing](./assets/local-testing.png){width="600" zoomable="yes"}

![Local testing results](./assets/local-testing-1.png){width="600" zoomable="yes"}

### Deploy the extension

After verifying the generated code, you are ready to deploy the extension.

#### Pre-deployment assessment

The agent performs a pre-deployment readiness assessment before deploying.

![Pre-deployment assessment](./assets/pre-deployment-assessment.png){width="600" zoomable="yes"}

#### Deploy

When you are confident with the assessment results, instruct the agent to proceed with deployment. The agent uses the MCP toolkit to verify, build, and deploy automatically.

![Deployment](./assets/deployment-process.png){width="600" zoomable="yes"}

### Test the API

You can test the API before integrating it into the storefront.

The agent provides the location of the new action and a testing strategy.

![Testing strategy](./assets/testing-strategy.png){width="600" zoomable="yes"}

#### Test manually with cURL

Test the API manually using cURL in a terminal:

```bash
curl -s "https://<your-site>.adobeioruntime.net/api/v1/web/ratings/ratings?sku=TEST-SKU-123"
```

![cURL test](./assets/curl-test.png){width="600" zoomable="yes"}

### Integrate with Edge Delivery Services

To integrate the ratings API with an [!DNL Adobe Commerce] storefront powered by [!DNL Edge Delivery Services], ask the agent to create a service contract with requirements for the ratings API:

```text
Create a service contract for the ratings api that I can pass on to the storefront agent. Name it RATINGS_API_CONTRACT.md
```

![Service contract](./assets/create-contract.png){width="600" zoomable="yes"}

![Service contract details](./assets/contract.png){width="600" zoomable="yes"}

Return to the terminal and run the following command in the `extension` folder to copy the file to the `storefront` folder:

```bash
cp RATINGS_API_CONTRACT.md ../storefront
```

## Connect to the storefront

This section will help you implement real storefront features, showing you how to communicate effectively with AI agents when working with [!DNL Adobe Commerce] dropins and [!DNL Edge Delivery Services].

>[!NOTE]
>
>The prompts provided are starting points - feel free to have a natural conversation with the agent.
>
>Each exercise builds on the previous one.

### Implement ratings stars and review count

1. Navigate to the `storefront` folder:

   ```bash
   cd storefront
   ```

1. Open the storefront folder in a new Cursor window. If you have the [Cursor CLI](https://cursor.com/docs/configuration/shell#installing-cli-commands) installed, enter the following command in your terminal:

   ```bash
   cursor .
   ```

1. Start the local development server:

   ```bash
   npm run start
   ```

1. In a browser, navigate to the Apparel page:

   ```text
   http://localhost:3000/apparel
   ```

1. Observe the boilerplate storefront UI layout.

1. Use the following prompt with your agent:

   ```text
   Implement product ratings to the storefront.
   Add a 5-star rating display with a review count underneath each product name on the product list page, product details page, and product recommendations.
   Use the dropin slot system where available.

   Use the @RATINGS_API_CONTRACT.md to understand how to use the ratings api.
   ```

   >[!NOTE]
   >
   >If you are prompted to start the local development server, inform the agent that it is already running.

1. Observe the changes in the codebase, and watch the Apparel page for updates.

**Expected outcome:**

* A product rating "component" is automatically created.
* The component is integrated into product-details, product-list-page, and product-recommendations blocks using Slots.
* Stars display with proper fill proportions based on mock rating values.

![Product Ratings Implementation](./assets/product-ratings-implementation.png){width="600" zoomable="yes"}

### Change the star colors

Use the following prompt to your agent:

```text
Change the star fill color to red.
```

**Expected outcome:**

The stars are changed to red.

![Red Star Colors](./assets/red-star-colors.png){width="600" zoomable="yes"}

## Storefront recap

Throughout this tutorial, we have covered the following topics:

* **Feature implementation**: How to describe new functionality to an AI agent.
* **Iterative changes**: Making quick modifications to existing code.
* **Complex UI components**: Building interactive features with visual references.
* **Dropin integration**: Working with [!DNL Adobe Commerce] dropin containers and slots.
* **Component reusability**: Creating shared components used across multiple blocks.

## Next steps

If time allows, you can further customize your ratings extension by adding the following features:

### Add rating distribution modal (optional)

The following steps show how the agent handles complex UI features with visual references.

1. **Before starting:** Save the following mock image and paste it into the chat with your storefront agent.

   ![Rating Distribution Mockup](./assets/rating-distribution-mockup.png){width="600" zoomable="yes"}

1. Use the following steps to guide you through creating the ratings distribution modal based on the reference image:

   * Update the API to return additional data representing the ratings distribution.
   * Update the API Contract.
   * Update the contact in the storefront codebase.
   * Ask the storefront agent to use the reference image and updated API Contract to add the ratings distribution to the PDP page.

1. Observe the following changes in the codebase, and watch the Apparel page for updates:

   * How the agent interprets the visual mockup
   * Whether it uses appropriate HTML structure for accessibility
   * How it handles the positioning and interaction states

**Troubleshooting:**

* If the modal does not appear, check the browser console for errors.
* If positioning is off, you can ask the agent to:

   ```text
   adjust the modal position to be...
   ```

![Rating Distribution Modal](./assets/rating-distribution-modal.png){width="600" zoomable="yes"}
